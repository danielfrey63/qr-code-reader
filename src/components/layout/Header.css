/* ==========================================================================
   Header - App Branding and Navigation
   ========================================================================== */

/**
 * Compact header designed to be non-intrusive
 * Prioritizes the camera viewfinder experience
 */
.header {
  flex-shrink: 0;
  width: 100%;
  background-color: var(--color-bg-primary, #ffffff);
  border-bottom: 1px solid var(--color-neutral-200, #eeeeee);
  /* Safe area padding for notched devices */
  padding-top: env(safe-area-inset-top);
}

/**
 * Header container with flexbox for alignment
 * Supports optional left/right action buttons
 */
.header__container {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.75rem 1rem;
  gap: 0.75rem;
  min-height: 3rem;
  position: relative;
}

/* ==========================================================================
   Header Branding
   ========================================================================== */

.header__branding {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  flex: 1;
  min-width: 0; /* Allow text truncation */
}

.header__title {
  margin: 0;
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--color-neutral-900, #212121);
  line-height: 1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.header__subtitle {
  margin: 0;
  margin-top: 0.125rem;
  font-size: 0.75rem;
  color: var(--color-neutral-500, #9e9e9e);
  line-height: 1.2;
}

/* ==========================================================================
   Header Action Slots
   ========================================================================== */

.header__action {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 2.5rem;
}

.header__action--left {
  margin-right: auto;
}

.header__action--right {
  margin-left: auto;
}

/* When only branding is present (no actions), center it properly */
.header__container:not(:has(.header__action)) .header__branding {
  padding: 0 1rem;
}

/* ==========================================================================
   Dark Mode Support
   ========================================================================== */

/* Class-based dark mode (controlled by ThemeProvider) */
.dark .header {
  background-color: var(--color-dark-surface, #1a1a1a);
  border-bottom-color: var(--color-neutral-800, #424242);
}

.dark .header__title {
  color: var(--color-neutral-50, #fafafa);
}

.dark .header__subtitle {
  color: var(--color-neutral-400, #bdbdbd);
}

/* System preference fallback (when no theme class is set) */
@media (prefers-color-scheme: dark) {
  :root:not(.light):not(.dark) .header {
    background-color: var(--color-dark-surface, #1a1a1a);
    border-bottom-color: var(--color-neutral-800, #424242);
  }

  :root:not(.light):not(.dark) .header__title {
    color: var(--color-neutral-50, #fafafa);
  }

  :root:not(.light):not(.dark) .header__subtitle {
    color: var(--color-neutral-400, #bdbdbd);
  }
}

/* ==========================================================================
   Responsive Adjustments
   ========================================================================== */

/* Large screens */
@media (min-width: 768px) {
  .header__container {
    padding: 1rem 1.5rem;
  }

  .header__title {
    font-size: 1.25rem;
  }

  .header__subtitle {
    font-size: 0.8125rem;
  }
}

/* Small screens - more compact header */
@media (max-width: 480px) {
  .header__container {
    padding: 0.5rem 0.75rem;
    min-height: 2.5rem;
    gap: 0.5rem;
  }

  .header__title {
    font-size: 1rem;
  }

  .header__subtitle {
    font-size: 0.6875rem;
  }

  .header__action {
    min-width: 2rem;
  }
}

/* Landscape on mobile - even more compact */
@media (orientation: landscape) and (max-height: 500px) {
  .header__container {
    padding: 0.375rem 0.75rem;
    min-height: 2rem;
  }

  .header__title {
    font-size: 0.875rem;
  }

  .header__subtitle {
    display: none;
  }
}

/* Very small screens */
@media (max-width: 320px) {
  .header__title {
    font-size: 0.9375rem;
  }
}

/* ==========================================================================
   Header Variations
   ========================================================================== */

/* Transparent header variant (for use over camera) */
.header--transparent {
  background-color: transparent;
  border-bottom: none;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  z-index: 10;
}

.header--transparent .header__title {
  color: white;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
}

.header--transparent .header__subtitle {
  color: rgba(255, 255, 255, 0.8);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* Minimal header - just the title, no border */
.header--minimal {
  border-bottom: none;
  background-color: transparent;
}

.header--minimal .header__container {
  padding: 0.5rem 1rem;
}
